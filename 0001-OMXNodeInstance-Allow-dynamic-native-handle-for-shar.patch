From 15a0e1dc6e48b45379be082304d296e926c37e1c Mon Sep 17 00:00:00 2001
From: Kyle Harrison <khwebmail@gmail.com>
Date: Sat, 15 Sep 2018 18:31:07 +0100
Subject: [PATCH] OMXNodeInstance: Allow dynamic native handle for shared mem
 buffer

Change-Id: I1fb53b128246e5b195fe868ec800ae794b00913e
---
 media/libstagefright/omx/OMXNodeInstance.cpp | 1 +
 1 file changed, 1 insertion(+)

diff --git a/media/libstagefright/omx/OMXNodeInstance.cpp b/media/libstagefright/omx/OMXNodeInstance.cpp
index 9c8157116..c48651946 100644
--- a/media/libstagefright/omx/OMXNodeInstance.cpp
+++ b/media/libstagefright/omx/OMXNodeInstance.cpp
@@ -1081,6 +1081,7 @@ status_t OMXNodeInstance::useBuffer(
 
         case OMXBuffer::kBufferTypeSharedMem: {
             if (mPortMode[portIndex] != IOMX::kPortModePresetByteBuffer
+                    && mPortMode[portIndex] != IOMX::kPortModeDynamicNativeHandle
                     && mPortMode[portIndex] != IOMX::kPortModeDynamicANWBuffer) {
                 break;
             }
-- 
2.18.0

